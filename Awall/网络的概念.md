# 网络的概念

<aside>
💡     在理解墙和翻墙这个过程之前，我们首先要理解网络拓扑图，基于此来明白网络的正常传输过程

</aside>

# 1、OSI模型的介绍

![](https://wangcy.cf/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F738828ac-9ad0-4652-8ce5-a627faaa930f%2FUntitled.png?id=145fe89c-1564-476b-b3ff-d8cd32e6c861&table=block&spaceId=05a1b89d-ff84-4035-bdc6-863a0fae0b47&width=1530&userId=&cache=v2)

> **这是一张典型的OIS模型**

![](https://wangcy.cf/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4231c10c-bc89-484f-97a5-85d15dda6e23%2FUntitled.png?id=3bf19b55-db95-47b5-b0a3-393308caecd2&table=block&spaceId=05a1b89d-ff84-4035-bdc6-863a0fae0b47&width=340&userId=&cache=v2)

> 最简化的是四层模型，最下面的两层会合成一层，统称为物理层；
OIS七层模型只存在于理论中，实际应用过程中只存在五层模型
> 

# 2、NAT映射

![](https://wangcy.cf/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F891c0adc-e8e0-4e59-9603-979399357d15%2FUntitled.png?id=9f06dfef-8527-4e4c-a027-ad7eb190ebbb&table=block&spaceId=05a1b89d-ff84-4035-bdc6-863a0fae0b47&width=1460&userId=&cache=v2)

1. 由于IPv4的数量有限，在IPv6还没有普及的阶段，不可能实现每一个机子都有一个IP地址
2. 在这种情况下需要一个依附于一个大的设备，多个本地计算机共用一个IP地址
3. 多个本地计算机之间形成的是一个内网系统，然而内网IP是不能直接在公网传播的，需要先映射到公网的IP，这就是所谓的**NAT映射**

# 3、网络传输的过程

![](https://wangcy.cf/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F64a50dba-7fa9-48cb-8ecb-987f83b897ff%2FUntitled.png?id=545fc0e9-e320-4f6b-941b-6929377f9d37&table=block&spaceId=05a1b89d-ff84-4035-bdc6-863a0fae0b47&width=1530&userId=&cache=v2)

网络传输是由网址寻找IP的过程，首先是检查浏览器的缓存，没有的话就要找DNS（在本站[域名](https://www.notion.so/d37ad63ebe5140938ea5c5601aa7e808)中有更加详细的介绍）

> **数据流在应用层的传输大致要经历一下的过程：**
> 
- **本地计算机生成一个请求（eg：我要访问谷歌）**
    - 由于网址只是便于人们理解的一个代词，所以要想访问谷歌的服务器需要知道谷歌的IP地址
- **浏览器首先会在自己的缓存中寻找谷歌的ip地址，如果没有会查找本机的hosts文件**
    - 地址：C:\Windows\System32\drivers\etc
- **当这一步找不到谷歌的IP地址，浏览器就会向本机之外的路由器发送获取谷歌IP地址的请求**
    - 在早些年可以通过修改hosts的方法，加入一条IP [google.com](http://google.com) 信息的方式来规避GFW的审查直接连接到谷歌的服务器，但是近些年已经失效了，关于失效的具体原因以后再讲

        通过以上三步，已经可以确定在本地是无法获得谷歌的IP地址了，那我们只能够向更上一级的路由器、交换机来寻找，现在路由器和交换机很多都已经即成为一体了，这里为了便于理解，暂时将它们分开介绍

**在说明数据流从本地计算机发出之前，首先要先引入OSI模型中五层结构各自的作用**

![](https://wangcy.cf/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fdce79e5a-393a-4165-a627-54952662d30d%2FUntitled.png?id=767348a5-d16a-442a-9ecc-68826bbf5bf3&table=block&spaceId=05a1b89d-ff84-4035-bdc6-863a0fae0b47&width=1530&userId=&cache=v2)

> **从上往下解析逐渐增加自己的请求头
从下往上解析，是检验是否是发送给自己的，逐渐去掉请求头**
> 

![](https://wangcy.cf/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F64a50dba-7fa9-48cb-8ecb-987f83b897ff%2FUntitled.png?id=09622658-e1d8-48f4-8f46-1ccf222dab21&table=block&spaceId=05a1b89d-ff84-4035-bdc6-863a0fae0b47&width=1530&userId=&cache=v2)
